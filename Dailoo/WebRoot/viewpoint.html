<!DOCTYPE html>
<html lang="zh" prefix='og: http://ogp.me/ns#'>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no"/>
    <title>帶路 - Dailoo</title>
    <link rel="shortcut icon" href="images/general/dailoo.png">
    <meta name="Keywords" content="Dailoo, 帶路, 鹿野, 語音導覽, 導覽, 導遊, 高台散步, 鹿野品茶, 龍田逛逛">
    <meta name="Description" content="鹿野週邊語音導覽服務 - 就像在地人親自帶路">
    <meta id="og_name" property="og:site_name" content="帶路 - Dailoo" />
    <meta id="og_desc" property="og:description" content="鹿野週邊語音導覽服務 - 就像在地人親自帶路" />
    <meta id="og_title" property="og:title" content="帶路 - Dailoo"/>
    <meta id="og_image" property="og:image" content="http://www.dailoo.com/images/themelist/luye.png"/>
    <link rel="stylesheet" href="css/base.css"/>
    <link rel="stylesheet" href="css/viewpoint.css"/>
</head>
<body>
<div class="w">
    <!--主播放器-->
    <div class="player clearfix">
        <!--頭部導航欄-->
        <div class="header clearfix">
            <a id="backward" href="#"><img src="images/viewpoint/back.png" alt="" class="back fl"></a>
            <div id="share" href=""><img src="images/viewpoint/share.png" alt="" class="share fr"></div>
            <a id="vpLocation" target="_blank"><img src="images/viewpoint/location.png" alt="" class="location fr"></a>
        </div>
        <!--標題區塊-->
        <div id="vpName" class="title"></div>
        <div id="vpSubtitle" class="subtitle"></div>
        <!--圖片輪播區-->
        <div id="picShower" class="picshower clearfix">
            <img id="mainPhoto" alt="" class="pic">
            <button class="prevpic"></button>
            <button class="nextpic"></button>
            <div id="photoNum" class="photo-count">1/1</div>
        </div>
        <!--講者小圖-->
        <div><img id="speakerSmallPhoto" src="images/viewpoint/speaker_defalut_small.png" alt="" class="speaker-small"></div>
        <!--聲音進度條-->
        <div id="scrollBar" class="scroll">
            <div class="bar"></div>
            <div class="mask"></div>
            <div id="nowTime" class="nowtime">0:00</div>
            <div id="allTime" class="alltime">0:00</div>
        </div>
        <!--聲音控制器-->
        <div class="soundctrl clearfix">
            <audio id="audio"></audio>
            <button id="preTagBtn" class="prevtag fl"></button>
            <button id="playBtn" class="play fl"></button>
            <button id="nextTagBtn" class="nexttag fl"></button>
        </div>
    </div>
    <!--景點簡介-->
    <div id="summary" class="summary">
        <div id="vpTitle" class="title"></div>
        <div id="area" class="subtitle">台東縣鹿野鄉</div>
        <div id="vpIntro" class="intro"></div>
        <div id="readAllCont" class="readall">…展開全文</div>
    </div>
    <!--分隔線-->
    <a href="https://goo.gl/forms/UkVfGk86vZ2dqE1B2" target="_blank"><div class="feedback">意見回饋</div></a>
    <!--講者-->
    <div id="speaker" class="speaker">
        <div class="info clearfix">
            <div class="info-l fl">
                <img id="speakerPhoto" class="photo" alt="" src="images/viewpoint/speaker_default.png"/>
            </div>
            <div class="info-r fl">
                <div id="speakerName" class="name"></div>
                <div class="resume">
                    <ul id="speakerResume">
                    </ul>
                </div>
            </div>
        </div>
        <div class="contactInfo">
            <a id="speakerPhone" class="phone" href="#">
                <s></s>
                <div></div>
            </a>
            <a id="speakerHome" class="home" href="#">
                <s></s>
                <div></div>
            </a>
            <a id="speakerUrl" class="facebook" href="#" target="_blank">
                <s></s>
                <div></div>
            </a>
        </div>
        <div  class="intro">
            <div id="speakerIntro" class="cont"></div>
            <div id="readAllSpeakerIntro" class="readall">...展開全文</div>
        </div>
        <!--<iframe id="ytplayer" class="ytplayer" width="880" height="495" src="" frameborder="0" allowfullscreen></iframe>-->
        <div id="ytplayer" class="ytplayer"></div>
        <img id="videoPrep" src="images/viewpoint/video_preparing.png" alt="" style="margin-top: 76px;">
    </div>
    <!--還可以收聽-->
    <div id="moreAudio" class="more-audio">
        <div id="moreAudioTitle" class="title">還有以下可以收聽：</div>
    </div>
    <!--周邊景點-->
    <div id="neighView" class="neigh-view">
        <div class="title">周邊景點</div>
    </div>
    <!--分享區塊-->
    <div id="sharemask" class="sharemask"></div>
    <div id="sharebox" class="sharebox">
        <ul class="share-buttons">
            <li>
                <a href="http://line.naver.jp/R/msg/text/?www.dailoo.com"
                   target="_blank" title="Share on Line"
                   onclick="window.open('http://line.naver.jp/R/msg/text/?' + encodeURIComponent(document.shortUrl)); return false;"><img
                        alt="Share on Line" src="images/social_flat_rounded_rects_svg/Line.png"></a></li>
            <li><a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.test.com&t="
                   title="Share on Facebook" target="_blank"
                   onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.shortUrl) + '&t=' + encodeURIComponent(document.shortUrl)); return false;"><img
                    alt="Share on Facebook" src="images/social_flat_rounded_rects_svg/Facebook.svg"></a></li>
            <li><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.test.com" target="_blank"
                   title="Share on Google+"
                   onclick="window.open('https://plus.google.com/share?url=' + encodeURIComponent(document.shortUrl)); return false;"><img
                    alt="Share on Google+" src="images/social_flat_rounded_rects_svg/Google+.svg"></a></li>
            <li>
                <a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Fwww.test.com&text=:%20http%3A%2F%2Fwww.test.com"
                   target="_blank" title="Tweet"
                   onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.title) + ':%20'  + encodeURIComponent(document.shortUrl)); return false;"><img
                        alt="Tweet" src="images/social_flat_rounded_rects_svg/Twitter.svg"></a></li>
            <li><a href="mailto:?subject=&body=:%20http%3A%2F%2Fwww.test.com" target="_blank" title="Send email"
                   onclick="window.open('mailto:?subject=' + encodeURIComponent(document.title) + '&body=' +  encodeURIComponent(document.shortUrl)); return false;"><img
                    alt="Send email" src="images/social_flat_rounded_rects_svg/Email.svg"></a></li>
        </ul>
        <div class="share-input">
            <input id="shareInput" type="text" />
        </div>
    </div>
</div>
<!--Footer引入-->
<iframe src="footer.html" id="footerIframe" width="100%" height="0" marginwidth="0" marginheight="0"
        scrolling="No" frameborder="0" style="margin-top: 120px;"></iframe>
</body>
</html>
<script src="https://www.youtube.com/iframe_api"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="js/simplejsinher.js"></script>
<script type="text/javascript" src="js/base.js"></script>
<script type="text/javascript" src="js/scrollbar.js"></script>
<script type="text/javascript" src="js/imgSlider.js"></script>
<script type="text/javascript" src="js/audio.js"></script>
<script type="text/javascript" src="js/viewpoint.js"></script>
<!--<script type="text/javascript" src="js/viewpoint.all.min.js"></script>-->
<!--<script type="text/javascript" src="js/all.min.js"></script>-->

<script>

    var vpId = location.href.split("id=")[1];
    if(typeof vpId == 'undefined'){location.href = "/themelist.html?id=e3cfc0f0-a9f5-439b-a534-efff46ced2ce"}
    var speakerData = "";

    $.ajax({
        url: "/ViewpointServlet", context: document.body,
        type: "POST",
        data: {"method": "getViewpointInfo", "id": vpId},
        success: function (data) {
            var data = eval("(" + data + ")");

            //修正照片URL
            var tags = data.audio.tags;
            if (typeof tags[0] != 'undefined') {
                for (var i = 0; i < tags.length; i++) {
                    tags[i].photoUrl = "/ResourceServlet?url=" + tags[i].photoUrl;
                }
            }
            console.dir(data);
            speakerData = data.speaker;
            initDataFromServer(data);
        },
    });
    history.replaceState(null, null, location.href);

    var i = 0;
    function onYouTubeIframeAPIReady() {
        //如果還沒有拿到講者資訊，等待0.5秒後再執行
        if("" == speakerData){setTimeout(function(){
            onYouTubeIframeAPIReady();
        }, 500);} else{ setSpeakerYoutube();}
    }

    //設定講者影片
    function setSpeakerYoutube(){

        var YTUrl = speakerData.youtubeUrl;
        if (YTUrl != '') {
            var YTID = YTUrl.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/)[1];
            var ytplayer;
            ytplayer = new YT.Player('ytplayer', {
                height: '495',
                width: '880',
                videoId: YTID,
                events: {'onStateChange': onPlayerStateChange}
            });
            function onPlayerStateChange(event) {
                if (event.data == YT.PlayerState.PLAYING) {
                    document.getElementById("audio").pause();
                }
            }
            $$("videoPrep").style.display = "none";
        }
    }

</script>